

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with Metadata &mdash; MFSQL Connector 4.9.27.71 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/MFSQL-Favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Working with Class Tables" href="../working-with-class-tables/index.html" />
    <link rel="prev" title="MFSQL Data Exchange and reporting Connector" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> MFSQL Connector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
</ul>
<p class="caption"><span class="caption-text">MFSQL Connector Guide:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to MFSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">MFSQL Data Exchange and reporting Connector</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with Metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-synchronising-the-metadata">Why synchronising the metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-synchronization-procedures">Metadata synchronization procedures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synchronize-metadata-for-the-first-time">Synchronize metadata for the first time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#synchronize-specific-metadata">Synchronize specific metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="#synchronize-metadata-tables-after-the-initial-synchronisation">Synchronize metadata Tables after the initial synchronisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#refresh-all-metadata">Refresh all metadata:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-errors">Metadata errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-of-workflow-state-names">Change of workflow state names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../working-with-class-tables/index.html">Working with Class Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../m-files-event-log/index.html">M-Files event log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-the-context-menu/index.html">Using the Context Menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting/index.html">Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#m-files-external-connectors">M-Files External Connectors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-database-file-connector/index.html">MFSQL Database File Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-integration-connector/index.html">MFSQL Integration Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the-connector-framework/index.html">The Connector Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-control/index.html">Version Control</a></li>
</ul>
<p class="caption"><span class="caption-text">Blog:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../blogs/index.html">List of blogs</a></li>
</ul>
<p class="caption"><span class="caption-text">SQL Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../procedures/index.html">Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tables/index.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions/index.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views/index.html">Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MFSQL Connector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">MFSQL Data Exchange and reporting Connector</a> &raquo;</li>
        
      <li>Working with Metadata</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-metadata">
<h1>Working with Metadata<a class="headerlink" href="#working-with-metadata" title="Permalink to this headline">¶</a></h1>
<div class="section" id="why-synchronising-the-metadata">
<h2>Why synchronising the metadata<a class="headerlink" href="#why-synchronising-the-metadata" title="Permalink to this headline">¶</a></h2>
<p>The vault structure is captured in metadata baseline tables such as classes, object types etc.  Synchronizing the metadata updates the metadata structure of the specific vault into these inter related tables. These tables are use by MFSQL Connector to process against a replica structure of the vault. Note the following special considerations.</p>
<p>Refer to <a class="reference internal" href="../../the-connector-framework/connector-content/metadata-structure-tables/index.html"><span class="doc">Metadata Structure Tables</span></a> for more details on the structure tables
All ValueListItems are contained in a single table. The column AppRef
contains a unique reference that can be used in applications to access a
ValuelistItem without reference to the valuelist. The AppRef consists of
the Valuelist MFID and the Item MFID and is automatically created by the
Connector.</p>
<p>The spMFCreateLookupView procedure can be used to create a view for a
specific valuelist to be used in applications.</p>
<p>The Columns MFID and Name of the ValuelistItems in the
MFValuelistItems table is not unique as this table include all
valuelistitems accross all valuelists</p>
<p>After deployment of the Connector, the metadata of the vault are added to
the baseline metadata tables by synchronising the metadata using the
<strong>spMFSynchronizeMetadata</strong> procedure. When changes are made to the
metadata structure in M-Files using the administrator the same procedure
can be used to refresh the metadata. Note that metadata is not
automatically refreshed. It is refreshed on demand.Metadata maintenance</p>
<p>The <strong>spMFSynchronizeSpecificMetadata</strong> store procedure can be used to
refresh a specific type of metadata such as valueslist items or states.</p>
<p>Automated refresh of the metadata can be built into the deployment of
the specific application depending on the requirements for automation of
the refresh.</p>
<p>Refer to the ‘Change of Vault’ section in a case where the metadata in
the Connector are ported from one vault to another.</p>
</div>
<div class="section" id="metadata-synchronization-procedures">
<h2>Metadata synchronization procedures<a class="headerlink" href="#metadata-synchronization-procedures" title="Permalink to this headline">¶</a></h2>
<p>There are a number of store procedures  used for metadata
synchronization. Only three of these procedures are designed to be used
by the developer. The other procedures are all called by  these
procedures</p>
<div class="section" id="synchronize-metadata-for-the-first-time">
<h3>Synchronize metadata for the first time<a class="headerlink" href="#synchronize-metadata-for-the-first-time" title="Permalink to this headline">¶</a></h3>
<p>In order to synchronize the metadata tables with M-File server execute
the procedure <a class="reference internal" href="../../procedures/spMFSynchronizeMetadata.html"><span class="doc">spMFSynchronizeMetadata</span></a>.This
procedure will internally call internal procedures such as</p>
<ul class="simple">
<li><p>spMFSynchronizeLoginAccount</p></li>
<li><p>spMFSynchronizeUserAccount</p></li>
<li><p>spMFSynchronizeObjectType</p></li>
<li><p>spMFSynchronizeProperties</p></li>
<li><p>spMFSynchronizeValueList</p></li>
<li><p>spMFSynchronizeValueListItems</p></li>
<li><p>spMFSynchronizeWorkflow</p></li>
<li><p>spMFSynchronizeWorkflowsStates</p></li>
<li><p>spMFSynchronizeClasses</p></li>
</ul>
<p>Each spMFSynchronize* procedure will internally call two
other procedures</p>
<p>spMFGet*</p>
<p>spMFInsert*</p>
<p>spMFGet* procedure will connect to M-Files server and get the metadata
details in XML format and spMFInsert* procedure will insert those
details into the respective metadata tables.</p>
</div>
<div class="section" id="synchronize-specific-metadata">
<h3>Synchronize specific metadata<a class="headerlink" href="#synchronize-specific-metadata" title="Permalink to this headline">¶</a></h3>
<p>Use <a class="reference internal" href="../../procedures/spMFSynchronizeSpecificMetadata.html"><span class="doc">spMFSynchronizeSpecificMetadata</span></a>
to update a specific type of metadata.</p>
</div>
<div class="section" id="synchronize-metadata-tables-after-the-initial-synchronisation">
<h3>Synchronize metadata Tables after the initial synchronisation<a class="headerlink" href="#synchronize-metadata-tables-after-the-initial-synchronisation" title="Permalink to this headline">¶</a></h3>
<p>When synchronising metadata during development use <a class="reference internal" href="../../procedures/spMFDropAndUpdateMetadata.html"><span class="doc">spMFDropAndUpdateMetadata</span></a>. This procedure allows for a number of special parameters to control different aspects of the synchronization</p>
<p>This procedure should always be executed after changes to metadata in the vault.  Failing to do so may cause errors.</p>
</div>
<div class="section" id="refresh-all-metadata">
<h3>Refresh all metadata:<a class="headerlink" href="#refresh-all-metadata" title="Permalink to this headline">¶</a></h3>
<p>The standard method of updating metadata from M-Files to SQL is to use
this procedure.  Note that this procedure will also record the update in
MFProcessBatch and MFProcessBatchDetail logging tables.</p>
<p><a class="reference internal" href="../../procedures/spMFSynchronizeMetadata.html"><span class="doc">spMFSynchronizeMetadata</span></a>
<a class="reference internal" href="../../procedures/spMFDropAndUpdateMetadata.html"><span class="doc">spMFDropAndUpdateMetadata</span></a></p>
<p>Use this procedure when a specific type of metadata is required to be
updated, or before the metadata must be updated from SQL to M-Files and a metadata change has taken place.</p>
</div>
</div>
<div class="section" id="metadata-errors">
<h2>Metadata errors<a class="headerlink" href="#metadata-errors" title="Permalink to this headline">¶</a></h2>
<p>Following is some of the errors that may arise and be reported
through email when working with metadata and how to resolve them.  These
errors may arise from deploying an update package on an existing
installation.</p>
<ol class="arabic simple">
<li><p>Unable to update record in SQL because null values are not allowed.</p></li>
<li><p>No connection to the vault.</p></li>
</ol>
</div>
<div class="section" id="change-of-workflow-state-names">
<h2>Change of workflow state names<a class="headerlink" href="#change-of-workflow-state-names" title="Permalink to this headline">¶</a></h2>
<p>When the name of a state is modified in M-Files, it does not trigger a
change of version of the underlying object and the name change there
does not replicate through to SQL. This is particularly relevant where
the state column in the class table is used in reporting.</p>
<p>The procedure <a class="reference internal" href="../../procedures/spMFSynchronizeWorkFlowStateColumnChange.html"><span class="doc">spMFSynchronizeWorkFlowSateColumnChange</span></a> will
run through the class tables and update all state name changes.</p>
<p>Related script to demonstrate function: 01.201.Resetting workflow state
names on all class tables</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../working-with-class-tables/index.html" class="btn btn-neutral float-right" title="Working with Class Tables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="MFSQL Data Exchange and reporting Connector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Laminin Solutions Ltd

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>