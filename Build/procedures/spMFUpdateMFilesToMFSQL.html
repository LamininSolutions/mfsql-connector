

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>spMFUpdateMFilesToMFSQL &mdash; MFSQL Connector 4.11.33.77 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/MFSQL-Favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="spMFUpdateObjectChangeHistory" href="spMFUpdateObjectChangeHistory.html" />
    <link rel="prev" title="spMFUpdateItemByItem" href="spMFUpdateItemByItem.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MFSQL Connector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently asked questions</a></li>
</ul>
<p class="caption"><span class="caption-text">MFSQL Connector Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction to MFSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mfsql-data-exchange-and-reporting-connector/index.html">MFSQL Data Exchange and reporting Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mfsql-integration-connector/index.html">MFSQL Integration Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../the-connector-framework/index.html">The Connector Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version-control/index.html">Version Control</a></li>
</ul>
<p class="caption"><span class="caption-text">Blog:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blogs/index.html">List of blogs</a></li>
</ul>
<p class="caption"><span class="caption-text">SQL Components:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Procedures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spMFAddCommentForObjects.html">spMFAddCommentForObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFAliasesUpsert.html">spMFAliasesUpsert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFChangeClass.html">spMFChangeClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCheckAndUpdateAssemblyVersion.html">spMFCheckAndUpdateAssemblyVersion</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCheckLicenseStatus.html">spMFCheckLicenseStatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFClassTableColumns.html">spMFClassTableColumns</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFClassTableStats.html">spMFClassTableStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFConnectionTest.html">spMFconnectionTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFContextMenuActionItem.html">spMFContextMenuActionItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFContextMenuHeadingItem.html">spMFContextMenuHeadingItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFConvertTableToHtml.html">spMFConvertTableToHtml</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateAllLookups.html">spMFCreateAllLookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateAllMFTables.html">spMFCreateAllMFTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreatePublicSharedLink.html">spMFCreatePublicSharedLink</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateTable.html">spMFCreateTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateValueListLookupView.html">spMFCreateValueListLookupView</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateWorkflowStateLookupView.html">spMFCreateWorkflowStateLookupView</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteAdhocProperty.html">spMFDeleteAdhocProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteHistory.html">spMFDeleteHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObject.html">spMFDeleteObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObjectList.html">spMFDeleteObjectList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObjectVersionList.html">spMFDeleteObjectVersionList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeploymentDetails.html">spMFDeploymentDetails</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDropAllClassTables.html">spMFDropAllClassTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDropAndUpdateMetadata.html">spMFDropAndUpdateMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFExportFiles.html">spMFExportFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFExportFilesMultiClasses.html">spMFExportFilesMultiClasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetDataExport.html">spMFGetDataExport</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetDeletedObjects.html">spMFGetDeletedObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetHistory.html">spMFGetHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetLicense.html">spMFGetLicense</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetMFilesAssemblyVersion.html">spMFGetMFilesAssemblyVersion</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetMfilesLog.html">spMFGetMfilesLog</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetObjectvers.html">spMFGetObjectvers</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetProcedurePerformance.html">spMFGetProcedurePerformance</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFImportBlobFilesToMFiles.html">spMFImportBlobFilesToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertClass.html">spMFInsertClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertClassProperty.html">spMFInsertClassProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertLoginAccount.html">spMFInsertLoginAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertObjectType.html">spMFInsertObjectType</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertProperty.html">spMFInsertProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertUserAccount.html">spMFInsertUserAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertUserMessage.html">spMFInsertUserMessage</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertValueList.html">spMFInsertValueList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertValueListItems.html">spMFInsertValueListItems</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertWorkflow.html">spMFInsertWorkflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertWorkflowState.html">spMFInsertWorkflowState</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFLogError_EMail.html">spMFLogError_EMail</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFLogProcessSummaryForClassTable.html">spMFLogProcessSummaryForClassTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFObjectTypeUpdateClassIndex.html">spMFObjectTypeUpdateClassIndex</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatchDetail_Insert.html">spMFProcessBatchDetail_Insert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatch_Upsert.html">spMFProcessBatch_Upsert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatch_mail.html">spMFProcessBatch_Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFRemoveAdditionalProperties.html">spMFRemoveAdditionalProperties</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFResultMessageForUI.html">spMFResultMessageForUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSearchForObject.html">spMFSearchForObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSearchForObjectbyPropertyValues.html">spMFSearchForObjectbyPropertyValues</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSendHTMLBodyEmail.html">spMFSendHTMLBodyEmail</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetAdditionalProperty.html">SpmfSetAdditionalProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetContextMenuQueue.html">spMFSetContextMenuQueue</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetUniqueIndexes.html">spMFSetUniqueIndexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetup_Reporting.html">spMFSetup_Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeClasses.html">spMFSynchronizeClasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeFilesToMFiles.html">spMFSynchronizeFilesToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeLoginAccount.html">spMFSynchronizeLoginAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeLookupColumnChange.html">spmfSynchronizeLookupColumnChange</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeMetadata.html">spMFSynchronizeMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeObjectType.html">spMFSynchronizeObjectType</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeProperties.html">spMFSynchronizeProperties</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeSpecificMetadata.html">spMFSynchronizeSpecificMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeUserAccount.html">spMFSynchronizeUserAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueList.html">spMFSynchronizeValueList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueListItems.html">spMFSynchronizeValueListItems</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueListItemsToMfiles.html">spMFSynchronizeValueListItemsToMfiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkFlowStateColumnChange.html">spMFSynchronizeWorkFlowSateColumnChange</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkflow.html">spMFSynchronizeWorkflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkflowsStates.html">spMFSynchronizeWorkflowsStates</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFTableAudit.html">spMFTableAudit</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUnDeleteObject.html">spMFUnDeleteObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateAllncludedInAppTables.html">spMFUpdateAllncludedInAppTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateAssemblies.html">spMFUpdateAssemblies</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateAssemblyLog.html">spMFUpdateAssemblyLog</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateContextMenuQueue.html">spMFUpdateContextMenuQueue</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateExplorerFileToMFiles.html">spMFUpdateExplorerFileToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateHistoryShow.html">spMFUpdateHistoryShow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateItemByItem.html">spMFUpdateItemByItem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">spMFUpdateMFilesToMFSQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-info">Additional Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#warnings">Warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changelog">Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateObjectChangeHistory.html">spMFUpdateObjectChangeHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateSynchronizeError.html">spMFUpdateSynchronizeError</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTable.html">spMFUpdateTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableInternal.html">spMFUpdateTableInternal</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableWithLastModifiedDate.html">spMFUpdateTableWithLastModifiedDate</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTable_ObjIDs_GetGroupedList.html">spMFUpdateTable_ObjIDs_GetGroupedList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTable_ObjIDs_Grouped.html">spMFUpdateTable_ObjIDs_Grouped</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableinBatches.html">spMFUpdateTableinBatches</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUsersByUserGroup.html">spMFUsersByUserGroup</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFValidateEmailProfile.html">spMFValidateEmailProfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFVaultConnectionTest.html">spMFVaultConnectionTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFsettingsForDBUpdate.html">spMFsettingsForDBUpdate</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFsettingsForVaultUpdate.html">spMFsettingsForVaultUpdate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tables/index.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/index.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views/index.html">Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MFSQL Connector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Procedures</a> &raquo;</li>
        
      <li>spMFUpdateMFilesToMFSQL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="spmfupdatemfilestomfsql">
<h1>spMFUpdateMFilesToMFSQL<a class="headerlink" href="#spmfupdatemfilestomfsql" title="Permalink to this headline">¶</a></h1>
<dl class="simple">
<dt>Return</dt><dd><ul class="simple">
<li><p>1 = Success</p></li>
<li><p>-1 = Error</p></li>
</ul>
</dd>
<dt>Parameters</dt><dd><dl class="simple">
<dt>&#64;MFTableName nvarchar(128)</dt><dd><ul class="simple">
<li><p>Valid Class TableName as a string</p></li>
<li><p>Pass the class table name, e.g.: ‘MFCustomer’</p></li>
</ul>
</dd>
<dt>&#64;MFLastUpdateDate smalldatetime (output)</dt><dd><p>returns the most recent MF Last modified date</p>
</dd>
<dt>&#64;UpdateTypeID tinyint (optional)</dt><dd><ul class="simple">
<li><p>1 = incremental update (default)</p></li>
<li><p>0 = Full update</p></li>
</ul>
</dd>
<dt>&#64;MaxObjects INT</dt><dd><ul class="simple">
<li><p>Default = 100000</p></li>
<li><p>if UpdateTypeID = 0 then this parameter must be set if there are more than 100000 objects in the objecttype</p></li>
</ul>
</dd>
<dt>&#64;WithObjectHistory BIT</dt><dd><ul class="simple">
<li><p>Default = 0 (No)</p></li>
<li><p>set to 1 to include updating the object history</p></li>
</ul>
</dd>
<dt>&#64;RetainDeletions BIT</dt><dd><ul class="simple">
<li><p>Default = 0 (deletions will be removed from class table)</p></li>
<li><p>set to 1 to retain any deletions since the last update</p></li>
</ul>
</dd>
<dt>&#64;WithStats BIT</dt><dd><ul class="simple">
<li><p>default = 0</p></li>
<li><p>Set to 1 to show progress of processing</p></li>
</ul>
</dd>
<dt>&#64;Update_IDOut int (output)</dt><dd><p>returns the id of the last updated batch</p>
</dd>
<dt>&#64;ProcessBatch_ID int (optional, output)</dt><dd><p>Referencing the ID of the ProcessBatch logging table</p>
</dd>
<dt>&#64;Debug tinyint (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>1 = Standard Debug Mode</p></li>
<li><p>101 = Advanced Debug Mode</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this procedure has migrated over time from processing records by objid to a routine that can be used by default for large and small tables to process records from M-Files to SQL.
The procedure is fundamentally based on updating M-Files to SQL using a rapid evaluation of the object version of each object and then to update based on the object id of the object.</p>
</div>
<div class="section" id="additional-info">
<h2>Additional Info<a class="headerlink" href="#additional-info" title="Permalink to this headline">¶</a></h2>
<p>Setting UpdateTypeID = 0 (Full update) will perform a full audit of the class table by validating every object version in the class and run through an update of all the objects where the version in M-Files and SQL are not identical.</p>
<p>This will run spmfUpdateTableinBatches in silent mode. Note that the Max Objid to control the update is derived as the max(objid) in the class table + 500 of the class table.
Setting UpdateTypeID = 1 (incremental update) will perform an audit of the class table based on the date of the last modified object in the class table, and then update the records that is not identical</p>
<p>Deleted records in M-Files will be identified and removed.</p>
<p>The following importing scenarios apply:</p>
<ul class="simple">
<li><p>If the file already exist for the object then the existing file in M-Files will be overwritten. M-Files version control will record the prior version of the record.</p></li>
<li><p>If the object is new in the class table (does not yet have a objid and guid) then the object will first be created in M-Files and then the file will be added.</p></li>
<li><p>If the object in M-Files is a multifile document with no files, then the object will be converted to a single file object.</p></li>
<li><p>if the object in M-files already have a file or files, then it would convert to a multifile object and the additional file will be added</p></li>
<li><p>If the filename or location of the file cannot be found, then a error will be added in the filerror column in the MFFileImport Table.</p></li>
<li><p>If the parameter option &#64;IsFileDelete is set to 1, then the originating file will be deleted.  The default is to not delete.</p></li>
<li><p>The MFFileImport table keeps track of all the file importing activity.</p></li>
</ul>
</div>
<div class="section" id="warnings">
<h2>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h2>
<p>Use spmfUpdateTableInBatches to initiate a class table instead of this procedure.</p>
<p>When &#64;updateTypeID is set to 0 and the maximum objid of the object type is more than 100 000 then the &#64;MaxObjects parameter must be set</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Full update of class table.  Set parameter &#64;MaxObjects to the maximum oobject id in the object type when greater than 100000 to ensure that the audit process will run in batches.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="n">SMALLDATETIME</span>
   <span class="p">,</span><span class="o">@</span><span class="n">Update_IDOut</span>     <span class="nb">INT</span>
   <span class="p">,</span><span class="o">@</span><span class="n">ProcessBatch_ID</span>  <span class="nb">INT</span><span class="p">;</span>

<span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateMFilesToMFSQL</span><span class="p">]</span> <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="s1">&#39;YourTable&#39;</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="o">=</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">UpdateTypeID</span> <span class="o">=</span> <span class="mi">0</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">MaxObjects</span> <span class="o">=</span> <span class="mi">500000</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">Withstats</span> <span class="o">=</span> <span class="mi">1</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">Update_IDOut</span> <span class="o">=</span> <span class="o">@</span><span class="n">Update_IDOut</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="o">=</span> <span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="k">AS</span> <span class="p">[</span><span class="n">LastModifiedDate</span><span class="p">];</span>
</pre></div>
</div>
<p>For incremental updates</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="n">SMALLDATETIME</span>
   <span class="p">,</span><span class="o">@</span><span class="n">Update_IDOut</span>     <span class="nb">INT</span>
   <span class="p">,</span><span class="o">@</span><span class="n">ProcessBatch_ID</span>  <span class="nb">INT</span><span class="p">;</span>


<span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateMFilesToMFSQL</span><span class="p">]</span> <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="s1">&#39;YourTable&#39;</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="o">=</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">UpdateTypeID</span> <span class="o">=</span> <span class="mi">1</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">Update_IDOut</span> <span class="o">=</span> <span class="o">@</span><span class="n">Update_IDOut</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="o">=</span> <span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="k">OUTPUT</span>
                                <span class="p">,</span><span class="o">@</span><span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">@</span><span class="n">MFLastUpdateDate</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 78%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Date</p></td>
<td><p>Author</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>2023-11-10</p></td>
<td><p>LC</p></td>
<td><p>prevent update if &#64;objids is null</p></td>
</tr>
<tr class="row-odd"><td><p>2023-11-09</p></td>
<td><p>LC</p></td>
<td><p>remove resetting process 3 and 4</p></td>
</tr>
<tr class="row-even"><td><p>2023-08-16</p></td>
<td><p>LC</p></td>
<td><p>resolve bug for deleting not in class records</p></td>
</tr>
<tr class="row-odd"><td><p>2023-08-15</p></td>
<td><p>LC</p></td>
<td><p>deal with null value warning</p></td>
</tr>
<tr class="row-even"><td><p>2022-06-06</p></td>
<td><p>LC</p></td>
<td><p>resolve issue of removal of class table objects</p></td>
</tr>
<tr class="row-odd"><td><p>2022-05-06</p></td>
<td><p>LC</p></td>
<td><p>resolve bug with nextbatch_ID</p></td>
</tr>
<tr class="row-even"><td><p>2022-01-25</p></td>
<td><p>LC</p></td>
<td><p>allow for batch processing of audit when max object &gt; 100000</p></td>
</tr>
<tr class="row-odd"><td><p>2022-01-25</p></td>
<td><p>LC</p></td>
<td><p>increase maxobjects default to 100000</p></td>
</tr>
<tr class="row-even"><td><p>2021-12-20</p></td>
<td><p>LC</p></td>
<td><p>Maintain same processbatch_ID for entire process</p></td>
</tr>
<tr class="row-odd"><td><p>2021-12-20</p></td>
<td><p>LC</p></td>
<td><p>Revise removal of deleted objects from table</p></td>
</tr>
<tr class="row-even"><td><p>2021-12-16</p></td>
<td><p>LC</p></td>
<td><p>Remove deletion of audit table with full update</p></td>
</tr>
<tr class="row-odd"><td><p>2021-08-28</p></td>
<td><p>LC</p></td>
<td><p>with full update, remove objects in class table not in audit table</p></td>
</tr>
<tr class="row-even"><td><p>2021-07-03</p></td>
<td><p>LC</p></td>
<td><p>improve debugging and error reporting</p></td>
</tr>
<tr class="row-odd"><td><p>2021-05-11</p></td>
<td><p>LC</p></td>
<td><p>redesign the grouping of objects to overcome persistent issues</p></td>
</tr>
<tr class="row-even"><td><p>2021-05-10</p></td>
<td><p>LC</p></td>
<td><p>add controls to validate group list creation</p></td>
</tr>
<tr class="row-odd"><td><p>2021-04-26</p></td>
<td><p>LC</p></td>
<td><p>add removal of redundant class records</p></td>
</tr>
<tr class="row-even"><td><p>2021-03-17</p></td>
<td><p>LC</p></td>
<td><p>include audit statusflag =1 into incremental update</p></td>
</tr>
<tr class="row-odd"><td><p>2021-03-17</p></td>
<td><p>LC</p></td>
<td><p>resolve issue where objid for exist for class in two objecttypes</p></td>
</tr>
<tr class="row-even"><td><p>2021-03-16</p></td>
<td><p>LC</p></td>
<td><p>Remove object where class has changed from audit table</p></td>
</tr>
<tr class="row-odd"><td><p>2021-03-11</p></td>
<td><p>LC</p></td>
<td><p>fix objlist error when both class and audit objid is null</p></td>
</tr>
<tr class="row-even"><td><p>2021-03-10</p></td>
<td><p>LC</p></td>
<td><p>fix updatechangehistory when control table empty</p></td>
</tr>
<tr class="row-odd"><td><p>2021-01-07</p></td>
<td><p>LC</p></td>
<td><p>Include override to recheck any class objects not in Audit</p></td>
</tr>
<tr class="row-even"><td><p>2020-09-04</p></td>
<td><p>LC</p></td>
<td><p>Resolve bug with full update</p></td>
</tr>
<tr class="row-odd"><td><p>2020-08-23</p></td>
<td><p>LC</p></td>
<td><p>replace get max objid with index update</p></td>
</tr>
<tr class="row-even"><td><p>2020-08-23</p></td>
<td><p>LC</p></td>
<td><p>Add parameter to retain deletions, default set to NO.</p></td>
</tr>
<tr class="row-odd"><td><p>2020-08-22</p></td>
<td><p>LC</p></td>
<td><p>Elliminate use of get deleted records</p></td>
</tr>
<tr class="row-even"><td><p>2020-04-23</p></td>
<td><p>LC</p></td>
<td><p>Set maxobjects</p></td>
</tr>
<tr class="row-odd"><td><p>2020-03-06</p></td>
<td><p>LC</p></td>
<td><p>Add updating of object history</p></td>
</tr>
<tr class="row-even"><td><p>2020-02-14</p></td>
<td><p>LC</p></td>
<td><p>Resolve skipped audit items where class missing items</p></td>
</tr>
<tr class="row-odd"><td><p>2019-12-10</p></td>
<td><p>LC</p></td>
<td><p>Add a parameter to set the maximum number of objects in class</p></td>
</tr>
<tr class="row-even"><td><p>2019-09-27</p></td>
<td><p>LC</p></td>
<td><p>Set withstats for audit batches = 0</p></td>
</tr>
<tr class="row-odd"><td><p>2019-09-27</p></td>
<td><p>LC</p></td>
<td><p>Fix UpdateID in MFProcessBatchDetail</p></td>
</tr>
<tr class="row-even"><td><p>2019-09-03</p></td>
<td><p>LC</p></td>
<td><p>Set audittableinbatches to withstats = 0</p></td>
</tr>
<tr class="row-odd"><td><p>2019-09-03</p></td>
<td><p>LC</p></td>
<td><p>Set default date for deleted record check to 2000-01-01</p></td>
</tr>
<tr class="row-even"><td><p>2019-08-30</p></td>
<td><p>JC</p></td>
<td><p>Added documentation</p></td>
</tr>
<tr class="row-odd"><td><p>2019-08-05</p></td>
<td><p>LC</p></td>
<td><p>Fix bug in updating single record</p></td>
</tr>
<tr class="row-even"><td><p>2019-04-12</p></td>
<td><p>LC</p></td>
<td><p>Allow for large tables</p></td>
</tr>
<tr class="row-odd"><td><p>2018-10-22</p></td>
<td><p>LC</p></td>
<td><p>Align logtext description for reporting, refine ProcessBatch messages</p></td>
</tr>
<tr class="row-even"><td><p>2018-10-20</p></td>
<td><p>LC</p></td>
<td><p>Fix processing time calculation</p></td>
</tr>
<tr class="row-odd"><td><p>2018-05-10</p></td>
<td><p>LC</p></td>
<td><p>Add error if invalid table name is specified</p></td>
</tr>
<tr class="row-even"><td><p>2017-12-28</p></td>
<td><p>LC</p></td>
<td><p>Add routine to reset process_id 3,4 to 0</p></td>
</tr>
<tr class="row-odd"><td><p>2017-12-25</p></td>
<td><p>LC</p></td>
<td><p>Change BatchProcessDetail log text for lastupdatedate</p></td>
</tr>
<tr class="row-even"><td><p>2017-06-29</p></td>
<td><p>AC</p></td>
<td><p>Change LogStatusDetail to ‘Completed’ from ‘Complete’</p></td>
</tr>
<tr class="row-odd"><td><p>2017-06-08</p></td>
<td><p>AC</p></td>
<td><p>Incorrect LogTypeDetail value</p></td>
</tr>
<tr class="row-even"><td><p>2017-06-08</p></td>
<td><p>AC</p></td>
<td><p>ProcessBatch_ID not passed into spMFTableAudit</p></td>
</tr>
<tr class="row-odd"><td><p>2016-08-11</p></td>
<td><p>AC</p></td>
<td><p>Create Procedure</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spMFUpdateObjectChangeHistory.html" class="btn btn-neutral float-right" title="spMFUpdateObjectChangeHistory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spMFUpdateItemByItem.html" class="btn btn-neutral float-left" title="spMFUpdateItemByItem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, Laminin Solutions Ltd

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>