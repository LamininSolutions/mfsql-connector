

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reports from the extended Event log &mdash; MFSQL Connector 4.9.27.69 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/MFSQL-Favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Restore MFSQL database to a different server" href="../restore-to-a-different-database/index.html" />
    <link rel="prev" title="Report designers and the Connector" href="../report-designers-and-the-connector/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> MFSQL Connector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
</ul>
<p class="caption"><span class="caption-text">MFSQL Connector Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to MFSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-data-exchange-and-reporting-connector/index.html">MFSQL Data Exchange and reporting Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-database-file-connector/index.html">MFSQL Database File Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-integration-connector/index.html">MFSQL Integration Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the-connector-framework/index.html">The Connector Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-control/index.html">Version Control</a></li>
</ul>
<p class="caption"><span class="caption-text">Blog:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">List of blogs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../advanced-updating-of-valuelists-from-external-source/index.html">Advanced updating of Valuelists from external source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../align-metadata-from-an-external-source-with-data-in-m-files/index.html">Align metadata from an external source with data in M-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aligning-valuelist-items-with-different-owners/index.html">Aligning valuelist items with different owners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building-applications-around-m-files/index.html">Building applications around M-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../certified-application-developer-presentation/index.html">Certified Application Developer presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changing-class-of-object/index.html">Changing the class of an object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changing-from-single-lookup-to-multi-lookup/index.html">Changing from single lookup to multi lookup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../considerations-for-deleted-records/index.html">Considerations for deleted records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../considerations-for-large-volume-vault/index.html">Considerations for large volume vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create-a-scheduled-pull-from-m-files-using-sql-server-agent/index.html">Create a scheduled pull from M-Files using SQL Server Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-and-using-public-shared-link/index.html">Creating and using public shared link</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-multiple-related-objects-on-file-import/index.html">Creating multiple related objects on file import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crm-and-emailer-management/index.html">CRM and Emailer Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deleting-duplicate-objects/index.html">Deleting duplicate objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explore-object-versions/index.html">Explore Object History Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-reporting/index.html">Extended Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../externalid-displayid-objid/index.html">ExternalID versus DisplayID versus Objid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-all-objects-in-vault/index.html">Explore all the objects in the vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-number-of-records-in-class/index.html">Get number of records in Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-objectchangehistory/index.html">Working with object change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-with-a-custom-application/index.html">Getting started with a custom application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-to-know-mfsql-connector/index.html">Getting to know MFSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto-quick-follow-up-list/index.html">How to generate a quick follow up list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../illegal-xml-characters/index.html">Illegal XML Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../import-files-into-m-files-from-explorer/index.html">Import files into M-Files from explorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../importing-files-from-a-database/index.html">Importing files from a database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../insert-new-records-from-sql/index.html">Insert new records from SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-whitepaper/index.html">Integration whitepaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-sage-200---case-management/index.html">Integration with SAGE 200 - Case Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-sage-50/index.html">Integration with SAGE 50</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-test-equipment/index.html">Integration with test equipment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-vendor-management-and-purchasing-with-epicor-enterprise/index.html">Integration with Vendor Management and Purchasing with Epicor Enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mark-for-archiving-using-class-table/index.html">Mark for Archiving using Class Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata-management/index.html">Metadata Management and data cleansing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata_management_and_realignment/index.html">Metadata Management and Realignment Case Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="../moving-documents-from-one-class-to-another/index.html">Moving documents from one class to another</a></li>
<li class="toctree-l2"><a class="reference internal" href="../moving-metadata-from-text-properties-to-valuelist-items/index.html">Moving metadata from text properties to Valuelist items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiselectlookups/index.html">MultiSelectLookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../near-real-time-reporting/index.html">Near real time reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online-ordering-of-special-stock/index.html">Online Ordering of special stock</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online-quote-system/index.html">Online Quote System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-scanned-documents/index.html">Processing scanned documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../properties-with-multi-lookup-datatypes/index.html">Properties with multi lookup datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../real-datatype/index.html">Limitations of real datatype</a></li>
<li class="toctree-l2"><a class="reference internal" href="../report-designers-and-the-connector/index.html">Report designers and the Connector</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Reports from the extended Event log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exploring-the-objective">Exploring the objective</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-the-event-log-table-in-sql">Update the event log table in SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explore-the-events">Explore the events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prepare-the-view">Prepare the view</a></li>
<li class="toctree-l3"><a class="reference internal" href="#access-the-view-with-the-report">Access the view with the report</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../restore-to-a-different-database/index.html">Restore MFSQL database to a different server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpc-over-https/index.html">RPC over HTTPS setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setting-up-a-workflow-state-change/index.html">Setting up a workflow state change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup-agent-proxy/index.html">Setup Agent Proxy for MFSQLConnect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../status-report-using-context-menu/index.html">Status report using context menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table-relations---views-for-reporting/index.html">Table relations - views for reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../update-large-tables/index.html">Update large tables using batch mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-a-multi-lookup-property-on-an-object/index.html">Updating a multi lookup property on an object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-incorrect-properties-across-multiple-related-classes/index.html">Updating incorrect properties across multiple related classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-only-records-that-changed/index.html">Updating only records that changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating_millions_of_records/index.html">Updating millions of records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-delimiter-functions/index.html">Using delimiter functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-event-handler-for-sql-action/index.html">Using event handler for SQL action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-hyperlinks-with-mfsql-connector/index.html">Using hyperlinks with MFSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-m-files-external-connector/index.html">Using M-Files External Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-object-change-history-to-report-on-state-changes/index.html">Using object change history to report on state changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-spmfclasstablestats/index.html">Using spMFClassTableStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-the-external_id-to-match-third-party-app-tables/index.html">Using the External_ID to match third party app tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows-authentication/index.html">Using windows authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_checkedout/index.html">Working with checkedOut objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_dates/index.html">Working with date and time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_document_collections/index.html">Working with Document Collections</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">SQL Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../procedures/index.html">Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tables/index.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions/index.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views/index.html">Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MFSQL Connector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">List of blogs</a> &raquo;</li>
        
      <li>Reports from the extended Event log</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reports-from-the-extended-event-log">
<h1>Reports from the extended Event log<a class="headerlink" href="#reports-from-the-extended-event-log" title="Permalink to this headline">¶</a></h1>
<p>One of the hidden features of the Connector is to get the M-Files Event
log and produce reports from it. This works with both standard and
extended event log in M-Files. This illustration will focus on the
extended event log.</p>
<p>M-Files event log reports many different types of events. Each type of
event will include a distinct set of properties recorded for the event.
The properties are a rich set of information about what has happened in
the vault, depending on the type of the event that took place. Any
export of the event log must allow for exploring the events by type.</p>
<p>To make the most of the Connector’s capability one need to explore the
event types and target the types that may provide the information
required in the report.</p>
<p>A couple of steps are necessary to make it happen:</p>
<ul class="simple">
<li><p>Set the object of exploring or reporting from the event log</p></li>
<li><p>Update the event log table</p></li>
<li><p>Explore the events to identify the type of events to be report on</p></li>
<li><p>Prepare the view</p></li>
<li><p>Access the view with excel or any other report designer.</p></li>
</ul>
<p>There is a handy example script in the installation files :
17.101.Export and use M-Files event log.</p>
<p>The video provides and overview</p>
<hr class="docutils" />
<div class="section" id="exploring-the-objective">
<h2>Exploring the objective<a class="headerlink" href="#exploring-the-objective" title="Permalink to this headline">¶</a></h2>
<p>A good place to start is with M-Files Admin. Identify the events to be
explored further.</p>
<p><img alt="image0" src="../../_images/img_14.jpg" /></p>
<p><img alt="image1" src="../../_images/img_23.jpg" /></p>
<p>Double click an event to explore the available data further.</p>
<p>This is mainly to allow the developer to isolate the properties and the
types of data associated with the event.</p>
<p>The properties would differ from one type of event to another.</p>
<p>You would also be able to explore this in SQL when you start to put the
view together.</p>
</div>
<div class="section" id="update-the-event-log-table-in-sql">
<h2>Update the event log table in SQL<a class="headerlink" href="#update-the-event-log-table-in-sql" title="Permalink to this headline">¶</a></h2>
<p>Using SSMS and the Connector the procedure: spMFGetMfilesLog the M-Files
Event Log can be pulled into a SQL Table.</p>
<p>Using the parameter IsClearMfilesLog will allow you to automatically
clear the log in M-Files.</p>
<p>If this procedure is run as an agent on a regular basis it would
cumulatively load all of the events into the SQL table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFGetMfilesLog</span><span class="p">]</span> <span class="o">@</span><span class="n">IsClearMfilesLog</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">-- bit  select 1 to delete the log in M-Files</span>
                              <span class="o">@</span><span class="n">Debug</span> <span class="o">=</span> <span class="mi">0</span>            <span class="c1">-- small</span>
</pre></div>
</div>
<p>The extract of the events are saved in a table MFEventlog_OpenXML. The
table only includes the latest export. However, on each export another
table is updated MFilesEvents. This table can be explored and used for
the views. The columns consist of standard columns that is the same for
all event and an XML record for the variable data.</p>
<p><img alt="image2" src="../../_images/img_3.jpg" /></p>
</div>
<div class="section" id="explore-the-events">
<h2>Explore the events<a class="headerlink" href="#explore-the-events" title="Permalink to this headline">¶</a></h2>
<p>Double click on the XML column for an event of your choice. This will
display the properties in XML format for the next step.</p>
<p>Identify the properties be included in the report.</p>
<p><img alt="image3" src="../../_images/img_4.jpg" /></p>
</div>
<div class="section" id="prepare-the-view">
<h2>Prepare the view<a class="headerlink" href="#prepare-the-view" title="Permalink to this headline">¶</a></h2>
<p>The sample scripts below can be used as a guide to access the correct
elements and attributes in the XML data.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">--show object that is not system objects</span>

<span class="k">SELECT</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">ID</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Category</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">CausedByUser</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="k">TimeStamp</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/title)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">NameOrTitle</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/objtype/@id)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">ObjectType_ID</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/objtype)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">ObjectType</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/objid)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">Objid</span><span class="p">]</span>
<span class="k">FROM</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">MFilesEvents</span><span class="p">]</span> <span class="p">[</span><span class="n">me</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Category</span><span class="p">]</span> <span class="o">&lt;&gt;</span> <span class="s1">&#39;System&#39;</span><span class="p">;</span>

<span class="c1">--show files downloaded</span>

  <span class="k">Select</span> <span class="n">id</span>
 <span class="p">,</span><span class="n">me</span><span class="p">.[</span><span class="n">Category</span><span class="p">]</span>
 <span class="p">,</span><span class="n">me</span><span class="p">.[</span><span class="n">CausedByUser</span><span class="p">]</span>
 <span class="p">,</span><span class="n">me</span><span class="p">.[</span><span class="k">TimeStamp</span><span class="p">]</span>
<span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;(/event/data/objectversion/title)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">NameOrTitle</span>
<span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;(/event/data/filename)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="p">[</span><span class="n">FileName</span><span class="p">]</span>
<span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;(/event/data/objectversion/objver/objtype/@id)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ObjectType_ID</span>
<span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;(/event/data/objectversion/objver/objtype)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ObjectType</span>
<span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;(/event/data/objectversion/objver/objid)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="p">[</span><span class="n">Objid</span><span class="p">]</span>
<span class="k">From</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">MFilesEvents</span><span class="p">]</span> <span class="n">me</span>
<span class="k">WHERE</span> <span class="n">me</span><span class="p">.</span><span class="n">Category</span> <span class="o">=</span> <span class="s1">&#39;FileAccess&#39;</span>

<span class="c1">-- show public files downloaded</span>
<span class="k">SELECT</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">ID</span><span class="p">],</span>
       <span class="k">CAST</span><span class="p">([</span><span class="n">me</span><span class="p">].[</span><span class="k">TimeStamp</span><span class="p">]</span> <span class="k">AS</span> <span class="n">DATETIME</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="k">Timestamp</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/title)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">NameOrTitle</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/filename)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">FileName</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/ipaddress)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">IPAddress</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/objtype)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">ObjectType</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/objid)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="n">Objid</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/objectversion/objver/version)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="p">[</span><span class="k">Version</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">]</span>
<span class="k">FROM</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">MFilesEvents</span><span class="p">]</span> <span class="p">[</span><span class="n">me</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="k">Type</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;File downloaded via public link&#39;</span><span class="p">;</span>

<span class="c1">--show items from pre-and post update types</span>


<span class="k">SELECT</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">ID</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Category</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">CausedByUser</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="k">TimeStamp</span><span class="p">],</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/structuredata/valuelistitem/@type)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ChangeType1</span><span class="p">,</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/structuredata/valuelistitem/vlitem/@value)[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ItemValue1</span><span class="p">,</span>
 <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/structuredata/valuelistitem/@type)[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ChangeType2</span><span class="p">,</span>
       <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/data/structuredata/valuelistitem/vlitem/@value)[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ItemValue2</span>
<span class="k">FROM</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">MFilesEvents</span><span class="p">]</span> <span class="p">[</span><span class="n">me</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="p">[</span><span class="n">me</span><span class="p">].[</span><span class="n">Events</span><span class="p">].[</span><span class="n">value</span><span class="p">](</span><span class="s1">&#39;(/event/type/@id)[1]&#39;</span><span class="p">,</span><span class="s1">&#39;varchar(100)&#39;</span><span class="p">)</span>  <span class="o">=</span><span class="s1">&#39;ValueListItemChanged&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="access-the-view-with-the-report">
<h2>Access the view with the report<a class="headerlink" href="#access-the-view-with-the-report" title="Permalink to this headline">¶</a></h2>
<p>The final step is to use the target script to create a view and to
access the view using any report designer, or by setting up a ODBC data
connection to the view in excel. Demonstrating this is beyond the scope
of this blog.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../restore-to-a-different-database/index.html" class="btn btn-neutral float-right" title="Restore MFSQL database to a different server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../report-designers-and-the-connector/index.html" class="btn btn-neutral float-left" title="Report designers and the Connector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Laminin Solutions Ltd

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>