

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using spMFClassTableStats &mdash; MFSQL Connector 4.9.27.69 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/MFSQL-Favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using the External_ID to match third party app tables" href="../using-the-external_id-to-match-third-party-app-tables/index.html" />
    <link rel="prev" title="Using object change history to report on state changes" href="../using-object-change-history-to-report-on-state-changes/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> MFSQL Connector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
</ul>
<p class="caption"><span class="caption-text">MFSQL Connector Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to MFSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-data-exchange-and-reporting-connector/index.html">MFSQL Data Exchange and reporting Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-database-file-connector/index.html">MFSQL Database File Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mfsql-integration-connector/index.html">MFSQL Integration Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the-connector-framework/index.html">The Connector Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-control/index.html">Version Control</a></li>
</ul>
<p class="caption"><span class="caption-text">Blog:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">List of blogs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../advanced-updating-of-valuelists-from-external-source/index.html">Advanced updating of Valuelists from external source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../align-metadata-from-an-external-source-with-data-in-m-files/index.html">Align metadata from an external source with data in M-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aligning-valuelist-items-with-different-owners/index.html">Aligning valuelist items with different owners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building-applications-around-m-files/index.html">Building applications around M-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../certified-application-developer-presentation/index.html">Certified Application Developer presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changing-class-of-object/index.html">Changing the class of an object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changing-from-single-lookup-to-multi-lookup/index.html">Changing from single lookup to multi lookup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../considerations-for-deleted-records/index.html">Considerations for deleted records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../considerations-for-large-volume-vault/index.html">Considerations for large volume vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create-a-scheduled-pull-from-m-files-using-sql-server-agent/index.html">Create a scheduled pull from M-Files using SQL Server Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-and-using-public-shared-link/index.html">Creating and using public shared link</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-multiple-related-objects-on-file-import/index.html">Creating multiple related objects on file import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crm-and-emailer-management/index.html">CRM and Emailer Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deleting-duplicate-objects/index.html">Deleting duplicate objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explore-object-versions/index.html">Explore Object History Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-reporting/index.html">Extended Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../externalid-displayid-objid/index.html">ExternalID versus DisplayID versus Objid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-all-objects-in-vault/index.html">Explore all the objects in the vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-number-of-records-in-class/index.html">Get number of records in Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-objectchangehistory/index.html">Working with object change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-with-a-custom-application/index.html">Getting started with a custom application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-to-know-mfsql-connector/index.html">Getting to know MFSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto-quick-follow-up-list/index.html">How to generate a quick follow up list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../illegal-xml-characters/index.html">Illegal XML Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../import-files-into-m-files-from-explorer/index.html">Import files into M-Files from explorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../importing-files-from-a-database/index.html">Importing files from a database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../insert-new-records-from-sql/index.html">Insert new records from SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-whitepaper/index.html">Integration whitepaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-sage-200---case-management/index.html">Integration with SAGE 200 - Case Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-sage-50/index.html">Integration with SAGE 50</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-test-equipment/index.html">Integration with test equipment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration-with-vendor-management-and-purchasing-with-epicor-enterprise/index.html">Integration with Vendor Management and Purchasing with Epicor Enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mark-for-archiving-using-class-table/index.html">Mark for Archiving using Class Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata-management/index.html">Metadata Management and data cleansing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata_management_and_realignment/index.html">Metadata Management and Realignment Case Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="../moving-documents-from-one-class-to-another/index.html">Moving documents from one class to another</a></li>
<li class="toctree-l2"><a class="reference internal" href="../moving-metadata-from-text-properties-to-valuelist-items/index.html">Moving metadata from text properties to Valuelist items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiselectlookups/index.html">MultiSelectLookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../near-real-time-reporting/index.html">Near real time reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online-ordering-of-special-stock/index.html">Online Ordering of special stock</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online-quote-system/index.html">Online Quote System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-scanned-documents/index.html">Processing scanned documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../properties-with-multi-lookup-datatypes/index.html">Properties with multi lookup datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../real-datatype/index.html">Limitations of real datatype</a></li>
<li class="toctree-l2"><a class="reference internal" href="../report-designers-and-the-connector/index.html">Report designers and the Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reports-from-the-extended-event-log/index.html">Reports from the extended Event log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restore-to-a-different-database/index.html">Restore MFSQL database to a different server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpc-over-https/index.html">RPC over HTTPS setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setting-up-a-workflow-state-change/index.html">Setting up a workflow state change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup-agent-proxy/index.html">Setup Agent Proxy for MFSQLConnect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../status-report-using-context-menu/index.html">Status report using context menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table-relations---views-for-reporting/index.html">Table relations - views for reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../update-large-tables/index.html">Update large tables using batch mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-a-multi-lookup-property-on-an-object/index.html">Updating a multi lookup property on an object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-incorrect-properties-across-multiple-related-classes/index.html">Updating incorrect properties across multiple related classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating-only-records-that-changed/index.html">Updating only records that changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updating_millions_of_records/index.html">Updating millions of records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-delimiter-functions/index.html">Using delimiter functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-event-handler-for-sql-action/index.html">Using event handler for SQL action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-hyperlinks-with-mfsql-connector/index.html">Using hyperlinks with MFSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-m-files-external-connector/index.html">Using M-Files External Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-object-change-history-to-report-on-state-changes/index.html">Using object change history to report on state changes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using spMFClassTableStats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#interpreting-the-result">Interpreting the result</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reconcile-the-records">Reconcile the records</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grouping-the-result">Grouping the result</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-result-in-another-procedure">Using result in another procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#emailing-the-error-report">Emailing the error report</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using-the-external_id-to-match-third-party-app-tables/index.html">Using the External_ID to match third party app tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows-authentication/index.html">Using windows authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_checkedout/index.html">Working with checkedOut objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_dates/index.html">Working with date and time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_document_collections/index.html">Working with Document Collections</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">SQL Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../procedures/index.html">Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tables/index.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions/index.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views/index.html">Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MFSQL Connector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">List of blogs</a> &raquo;</li>
        
      <li>Using spMFClassTableStats</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-spmfclasstablestats">
<h1>Using spMFClassTableStats<a class="headerlink" href="#using-spmfclasstablestats" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../../procedures/spMFClassTableStats.html"><span class="doc">spMFClassTableStats</span></a> procedure is useful for</p>
<ul class="simple">
<li><p>getting information about a class table or class tables</p></li>
<li><p>using the result in other procedures such as error trapping or class table stats</p></li>
</ul>
<p>Running this procedure will produce a global temporary table of the same name ##spMFClassTableStats.  There are a number of parameters to refine the processing.  Executing without specifying any parameters will use the defaults</p>
<ul class="simple">
<li><p>include all class tables where IncludedInApp is not null</p></li>
<li><p>report the current state of the AuditHistory without updating the this table</p></li>
<li><p>report the current state of the class tables without resetting the tables</p></li>
<li><p>show the temporary table as an output</p></li>
<li><p>not send the output in a table to the support email address</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFClassTableStats</span><span class="p">]</span>
</pre></div>
</div>
<p>However, using the parameters the procedure could also</p>
<ul class="simple">
<li><p>run the procedure for a single table (useful when this procedure is used in custom procedures)</p></li>
<li><p>reset the class tables. This is useful during development.  It will delete the class table, recreate it, and repopulate it.  Do not use this switch for resetting large tables.</p></li>
<li><p>suppress to output and only create the temporary table when using this procedure in custom procedures</p></li>
<li><p>Select parameter &#64;WithAudit to perform a table audit on all the tables included in the filter. The procedure will update the object versions of the class table in the MFAuditHistory table. This could take a considerable time to run through if M-Files have a large number of objects.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Running this procedure could take some time to complete when the reset or &#64;withAudit parameters are set.</p>
</div>
<p>Refer to <a class="reference internal" href="../../procedures/spMFClassTableStats.html"><span class="doc">spMFClassTableStats</span></a> procedure for more details about the columns.</p>
<div class="section" id="interpreting-the-result">
<h2>Interpreting the result<a class="headerlink" href="#interpreting-the-result" title="Permalink to this headline">¶</a></h2>
<p>The output of the procedure has significance from many angles.</p>
<p>If all the error columns is 0 then the last processing ran successfully with no errors.
If checkedout is not 0 then there are records excluded from processing because they are checked out. Refer to <a class="reference internal" href="../working_with_checkedout/index.html"><span class="doc">Working with checkedOut objects</span></a> for more details on working with checked out objects.
If MFNotInSQL or SQLNotInMF columns are not null then some items was detected that was not processed</p>
<p>The significance of the result for a table include:</p>
<ul class="simple">
<li><p>When last was the table updated?</p></li>
<li><p>Is the table out of line with M-Files?</p></li>
<li><p>Has the last updated record in M-Files been processed?</p></li>
<li><p>Did the update produce any errors to take note of?</p></li>
<li><p>Are there any checked out objects that have not been updated?</p></li>
<li><p>How many records are there in M-Files?</p></li>
<li><p>Are there any objects where required workflow is not used?</p></li>
<li><p>Are there any records in M-Files which has not been processed?</p></li>
</ul>
</div>
<div class="section" id="reconcile-the-records">
<h2>Reconcile the records<a class="headerlink" href="#reconcile-the-records" title="Permalink to this headline">¶</a></h2>
<p>MFRecordCount = SQLRecordCount + Templates + Collections + Deleted</p>
<ul class="simple">
<li><p>The class tables does not include Templates or Collections for the same class.</p></li>
<li><p>Deletions are removed from the class table by default.  This can be controlled with a switch.</p></li>
</ul>
<p>Explore <a class="reference internal" href="../../procedures/spMFClassTableStats.html"><span class="doc">spMFClassTableStats</span></a> for more details on the options and switches.</p>
<p><img alt="image0" src="../../_images/image0.png" /></p>
</div>
<div class="section" id="grouping-the-result">
<h2>Grouping the result<a class="headerlink" href="#grouping-the-result" title="Permalink to this headline">¶</a></h2>
<p>Grouping tables for use with class table stats.  This is particularly useful when there are several subsets of applications in the connector and one want to have a quick overview of a particular subset.</p>
<p>Another use case is to Add additional tables to be included in the stats, but not included in the processing of class table updates. Set the includedInApp column to any integer above 2.</p>
<p>In the following example the additional tables column IncludedInApp in the MFClass table is set to 4 for all classes in the object type ‘Document’ and finally execute the stats.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="n">mc</span>
<span class="k">SET</span> <span class="p">[</span><span class="n">mc</span><span class="p">].[</span><span class="n">IncludeInApp</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="k">FROM</span> <span class="n">MFclass</span> <span class="n">mc</span>
<span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">MFObjectType</span> <span class="n">mo</span>
<span class="k">ON</span> <span class="p">[</span><span class="n">mo</span><span class="p">].[</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mc</span><span class="p">].[</span><span class="n">MFObjectType_ID</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="n">mo</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Document&#39;</span> <span class="k">AND</span> <span class="p">[</span><span class="n">mc</span><span class="p">].[</span><span class="n">IncludeInApp</span><span class="p">]</span> <span class="k">IS</span> <span class="k">null</span>

<span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFClassTableStats</span><span class="p">]</span>
</pre></div>
</div>
<p><img alt="image1" src="../../_images/image1.png" /></p>
</div>
<div class="section" id="using-result-in-another-procedure">
<h2>Using result in another procedure<a class="headerlink" href="#using-result-in-another-procedure" title="Permalink to this headline">¶</a></h2>
<p>The result of the procedure can be included in global temporary table ##spMFClassTableStats. Each time the procedure is run the temporary table will be reset.  Set the parameter &#64;IncludeOutput  = 1 to produce the result into the table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFClassTableStats</span><span class="p">]</span> <span class="o">@</span><span class="n">ClassTableName</span> <span class="o">=</span> <span class="s1">&#39;MFCustomer&#39;</span><span class="p">,</span> <span class="o">@</span><span class="n">IncludeOutput</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">##</span><span class="n">spMFClassTableStats</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Producing a result for all classes</p></li>
</ol>
<p>When running the procedure with an output for all tables in will show the classes that is not includedInApp also. However, it will not get the number of records in M-Files for these classes.</p>
<p><img alt="image2" src="../../_images/image2.png" /></p>
</div>
<div class="section" id="emailing-the-error-report">
<h2>Emailing the error report<a class="headerlink" href="#emailing-the-error-report" title="Permalink to this headline">¶</a></h2>
<p>Using the &#64;SendReport switch will allow for sending the output report to the support email account in the MFSettings table.</p>
<p>The report is automatically sent when the procedure spMFUpdateAllncludedInAppTables is run.  This procedure is included in the daily update agent and the report will therefore be sent if any errors are detected in the daily update agent.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../using-the-external_id-to-match-third-party-app-tables/index.html" class="btn btn-neutral float-right" title="Using the External_ID to match third party app tables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../using-object-change-history-to-report-on-state-changes/index.html" class="btn btn-neutral float-left" title="Using object change history to report on state changes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Laminin Solutions Ltd

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>