

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>spMFUpdateTable &mdash; MFSQL Connector 4.9.27.69 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/MFSQL-Favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="spMFUpdateTableInternal" href="spMFUpdateTableInternal.html" />
    <link rel="prev" title="spMFUpdateSynchronizeError" href="spMFUpdateSynchronizeError.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MFSQL Connector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently asked questions</a></li>
</ul>
<p class="caption"><span class="caption-text">MFSQL Connector Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction to MFSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mfsql-data-exchange-and-reporting-connector/index.html">MFSQL Data Exchange and reporting Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mfsql-database-file-connector/index.html">MFSQL Database File Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mfsql-integration-connector/index.html">MFSQL Integration Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../the-connector-framework/index.html">The Connector Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version-control/index.html">Version Control</a></li>
</ul>
<p class="caption"><span class="caption-text">Blog:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blogs/index.html">List of blogs</a></li>
</ul>
<p class="caption"><span class="caption-text">SQL Components:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Procedures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spMFAddCommentForObjects.html">spMFAddCommentForObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFAliasesUpsert.html">spMFAliasesUpsert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCheckAndUpdateAssemblyVersion.html">spMFCheckAndUpdateAssemblyVersion</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCheckLicenseStatus.html">spMFCheckLicenseStatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFClassTableColumns.html">spMFClassTableColumns</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFClassTableStats.html">spMFClassTableStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFConnectionTest.html">spMFconnectionTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFContextMenuActionItem.html">spMFContextMenuActionItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFContextMenuHeadingItem.html">spMFContextMenuHeadingItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFConvertTableToHtml.html">spMFConvertTableToHtml</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateAllLookups.html">spMFCreateAllLookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateAllMFTables.html">spMFCreateAllMFTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreatePublicSharedLink.html">spMFCreatePublicSharedLink</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateTable.html">spMFCreateTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateValueListLookupView.html">spMFCreateValueListLookupView</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFCreateWorkflowStateLookupView.html">spMFCreateWorkflowStateLookupView</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteAdhocProperty.html">spMFDeleteAdhocProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteHistory.html">spMFDeleteHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObject.html">spMFDeleteObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObjectList.html">spMFDeleteObjectList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeleteObjectVersionList.html">spMFDeleteObjectVersionList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDeploymentDetails.html">spMFDeploymentDetails</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDropAllClassTables.html">spMFDropAllClassTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFDropAndUpdateMetadata.html">spMFDropAndUpdateMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFExportFiles.html">spMFExportFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetDataExport.html">spMFGetDataExport</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetDeletedObjects.html">spMFGetDeletedObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetFilesDetails.html">spMFGetFilesDetails</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetHistory.html">spMFGetHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetLicense.html">spMFGetLicense</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetMFilesAssemblyVersion.html">spMFGetMFilesAssemblyVersion</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetMfilesLog.html">spMFGetMfilesLog</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFGetObjectvers.html">spMFGetObjectvers</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFImportBlobFilesToMFiles.html">spMFImportBlobFilesToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertClass.html">spMFInsertClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertClassProperty.html">spMFInsertClassProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertLoginAccount.html">spMFInsertLoginAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertObjectType.html">spMFInsertObjectType</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertProperty.html">spMFInsertProperty</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertUserAccount.html">spMFInsertUserAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertUserMessage.html">spMFInsertUserMessage</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertValueList.html">spMFInsertValueList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertValueListItems.html">spMFInsertValueListItems</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertWorkflow.html">spMFInsertWorkflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFInsertWorkflowState.html">spMFInsertWorkflowState</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFLogProcessSummaryForClassTable.html">spMFLogProcessSummaryForClassTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFObjectTypeUpdateClassIndex.html">spMFObjectTypeUpdateClassIndex</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatchDetail_Insert.html">spMFProcessBatchDetail_Insert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatch_Upsert.html">spMFProcessBatch_Upsert</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFProcessBatch_mail.html">spMFProcessBatch_Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFRemoveAdditionalProperties.html">spMFRemoveAdditionalProperties</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFResultMessageForUI.html">spMFResultMessageForUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSearchForObject.html">spMFSearchForObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSearchForObjectbyPropertyValues.html">spMFSearchForObjectbyPropertyValues</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSendHTMLBodyEmail.html">spMFSendHTMLBodyEmail</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetUniqueIndexes.html">spMFSetUniqueIndexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSetup_Reporting.html">spMFSetup_Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeClasses.html">spMFSynchronizeClasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeFilesToMFiles.html">spMFSynchronizeFilesToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeLookupColumnChange.html">spmfSynchronizeLookupColumnChange</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeMetadata.html">spMFSynchronizeMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeObjectType.html">spMFSynchronizeObjectType</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeProperties.html">spMFSynchronizeProperties</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeSpecificMetadata.html">spMFSynchronizeSpecificMetadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeUserAccount.html">spMFSynchronizeUserAccount</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueList.html">spMFSynchronizeValueList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueListItems.html">spMFSynchronizeValueListItems</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeValueListItemsToMfiles.html">spMFSynchronizeValueListItemsToMfiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkFlowStateColumnChange.html">spMFSynchronizeWorkFlowSateColumnChange</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkflow.html">spMFSynchronizeWorkflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFSynchronizeWorkflowsStates.html">spMFSynchronizeWorkflowsStates</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFTableAudit.html">spMFTableAudit</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateAllncludedInAppTables.html">spMFUpdateAllncludedInAppTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateAssemblies.html">spMFUpdateAssemblies</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateContextMenuQueue.html">spMFUpdateContextMenuQueue</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateExplorerFileToMFiles.html">spMFUpdateExplorerFileToMFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateHistoryShow.html">spMFUpdateHistoryShow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateItemByItem.html">spMFUpdateItemByItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateMFilesToMFSQL.html">spMFUpdateMFilesToMFSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateObjectChangeHistory.html">spMFUpdateObjectChangeHistory</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateSynchronizeError.html">spMFUpdateSynchronizeError</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">spMFUpdateTable</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#from-m-files-to-sql">From M-Files to SQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-sql-to-m-files-batch-mode">From SQL to M-Files - batch mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#warnings">Warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changelog">Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableInternal.html">spMFUpdateTableInternal</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableWithLastModifiedDate.html">spMFUpdateTableWithLastModifiedDate</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTable_ObjIDs_GetGroupedList.html">spMFUpdateTable_ObjIDs_GetGroupedList</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTable_ObjIDs_Grouped.html">spMFUpdateTable_ObjIDs_Grouped</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFUpdateTableinBatches.html">spMFUpdateTableinBatches</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFValidateEmailProfile.html">spMFValidateEmailProfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFVaultConnectionTest.html">spMFVaultConnectionTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFsettingsForDBUpdate.html">spMFsettingsForDBUpdate</a></li>
<li class="toctree-l2"><a class="reference internal" href="spMFsettingsForVaultUpdate.html">spMFsettingsForVaultUpdate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tables/index.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/index.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views/index.html">Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MFSQL Connector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Procedures</a> &raquo;</li>
        
      <li>spMFUpdateTable</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="spmfupdatetable">
<h1>spMFUpdateTable<a class="headerlink" href="#spmfupdatetable" title="Permalink to this headline">¶</a></h1>
<dl class="simple">
<dt>Return</dt><dd><ul class="simple">
<li><p>1 = Success</p></li>
<li><p>0 = Partial (some records failed to be inserted)</p></li>
<li><p>-1 = Error</p></li>
</ul>
</dd>
<dt>Parameters</dt><dd><dl class="simple">
<dt>&#64;MFTableName</dt><dd><ul class="simple">
<li><p>Valid Class TableName as a string</p></li>
<li><p>Pass the class table name, e.g.: ‘MFCustomer’</p></li>
</ul>
</dd>
<dt>&#64;Updatemethod</dt><dd><ul class="simple">
<li><p>0 = update from SQL to M-Files</p></li>
<li><p>1 = update from M-Files to SQL</p></li>
</ul>
</dd>
<dt>&#64;User_ID (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>User_Id from MX_User_Id column</p></li>
<li><p>This is NOT the M-Files user.  It is used to set and apply a user_id for a third party system. An example is where updates from a third party system must be filtered by the third party user (e.g. placing an order)</p></li>
</ul>
</dd>
<dt>&#64;MFLastModified (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>Get objects from M-Files that has been modified in M-files later than this date.</p></li>
</ul>
</dd>
<dt>&#64;ObjIDs (optional)</dt><dd><ul class="simple">
<li><p>Default = null</p></li>
<li><p>ObjID’s of records (separated by comma) e.g. : ‘10005,13203’</p></li>
<li><p>Restricted to 4000 charactes including the commas</p></li>
</ul>
</dd>
<dt>&#64;Update_IDOut (optional, output)</dt><dd><p>Output id of the record in MFUpdateHistory logging the update ; Also added to the record in the Update_ID column on the class table</p>
</dd>
<dt>&#64;ProcessBatch_ID (optional, output)</dt><dd><p>Referencing the ID of the ProcessBatch logging table</p>
</dd>
<dt>&#64;SyncErrorFlag (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>This parameter is automatically set by spMFUpdateSynchronizeError when synchronization routine is called.</p></li>
</ul>
</dd>
<dt>&#64;RetainDeletions (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>Set to 1 to keep deleted items in M-Files in the SQL table shown as “deleted” or the label of property 27 with the date time of the deletion.</p></li>
</ul>
</dd>
<dt>&#64;IsDocumentCollection (optional)</dt><dd><ul class="simple">
<li><p>Default = 0 (use default object type for the class)</p></li>
<li><p>Set to 1 to process objects with object type 9 (document collection) for the class.</p></li>
</ul>
</dd>
<dt>&#64;Debug (optional)</dt><dd><ul class="simple">
<li><p>Default = 0</p></li>
<li><p>1 = Standard Debug Mode</p></li>
<li><p>101 = Advanced Debug Mode</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>This procedure get and push data between M-Files and SQL based on a number of filters.  It is very likely that this procedure will be built into your application or own procedures as part of the process of creating, updating, inserting records from your application.</p>
<p>When calling this procedure in a query or via another procedure it will perform the update in batch mode on all the rows with a valid process_id.</p>
<p>When the requirements for transactional mode has been met and a record is updated/inserted in the class table with process_id = 1, a trigger will automatically fire spMFUpdateTable to update SQL to M-Files.</p>
<p>A number of procedures is included in the Connector that use this procedure including:
- spMFUpdateMFilesToSQL
- spMFUpdateTablewithLastModifiedDate
- spMFUpdateTableinBatches
- spMFUpdateAllIncludedInAppTables
- spMFUpdateItembyItem</p>
<p>By default the object type of the class will get the object type from the MFclass Table (using the default object type of the class).  To process Document collection objects for the class, the &#64;IsDocumentCollection must be set to 1.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-m-files-to-sql">
<h3>From M-Files to SQL<a class="headerlink" href="#from-m-files-to-sql" title="Permalink to this headline">¶</a></h3>
<p>Process_id in class table must be 0. All other rows are ignored.</p>
</div>
<div class="section" id="from-sql-to-m-files-batch-mode">
<h3>From SQL to M-Files - batch mode<a class="headerlink" href="#from-sql-to-m-files-batch-mode" title="Permalink to this headline">¶</a></h3>
<p>Process_id in class table must be 1 for rows to be updated or added to M-Files. All other rows are ignored.</p>
</div>
</div>
<div class="section" id="warnings">
<h2>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h2>
<p>When using a filter (e.g. for a single object) to update the table with Update method 1 and the filter object process_id is not 0 then the filter will automatically revert to updating all records. Take care to pass valid filters before passing them into the procedure call.</p>
<p>This procedure will not remove destroyed objects from the class table.  Use spMFUpdateMFilestoMFSQL identify and remove destroyed object.</p>
<p>This procedure will not remove objects from the class table where the class of the object was changed in M-Files.  Use spMFUpdateMFilestoMFSQL to identify and remove these objects from the class table.</p>
<p>Deleted objects will only be removed if they are included in the filter ‘Objids’.  Use spMFUpdateMFilestoMFSQL to identify deleted objects in general identify and update the deleted objects in the table.</p>
<p>Deleted objects in M-Files will automatically be removed from the class table unless &#64;RetainDeletions is set to 1.</p>
<p>The valid range of real datatype properties for uploading from SQL to M-Files is -1,79E27 and 1,79E27</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="o">@</span><span class="n">return_value</span> <span class="nb">int</span>

<span class="k">EXEC</span>    <span class="o">@</span><span class="n">return_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateTable</span><span class="p">]</span>
        <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="n">N</span><span class="s1">&#39;MFCustomerContact&#39;</span><span class="p">,</span>
        <span class="o">@</span><span class="n">UpdateMethod</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="o">@</span><span class="n">UserId</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">,</span>
        <span class="o">@</span><span class="n">MFModifiedDate</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span>
        <span class="o">@</span><span class="n">update_IDOut</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span>
        <span class="o">@</span><span class="n">ObjIDs</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">,</span>
        <span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span>
        <span class="o">@</span><span class="n">SyncErrorFlag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="o">@</span><span class="n">RetainDeletions</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="o">@</span><span class="n">Debug</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">SELECT</span>  <span class="s1">&#39;Return Value&#39;</span> <span class="o">=</span> <span class="o">@</span><span class="n">return_value</span>

<span class="k">GO</span>
</pre></div>
</div>
<p>Execute the core procedure with all parameters</p>
<hr class="docutils" />
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="o">@</span><span class="n">return_value</span> <span class="nb">int</span>
<span class="k">DECLARE</span> <span class="o">@</span><span class="n">update_ID</span> <span class="nb">INT</span><span class="p">,</span> <span class="o">@</span><span class="n">processBatchID</span> <span class="nb">int</span>

<span class="k">EXEC</span> <span class="o">@</span><span class="n">return_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateTable</span><span class="p">]</span>
     <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="n">N</span><span class="s1">&#39;YourTableName&#39;</span><span class="p">,</span> <span class="c1">-- nvarchar(128)</span>
     <span class="o">@</span><span class="n">UpdateMethod</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">-- int</span>
     <span class="o">@</span><span class="n">Update_IDOut</span> <span class="o">=</span> <span class="o">@</span><span class="n">update_ID</span> <span class="k">output</span><span class="p">,</span> <span class="c1">-- int</span>
     <span class="o">@</span><span class="n">ProcessBatch_ID</span> <span class="o">=</span> <span class="o">@</span><span class="n">processBatchID</span> <span class="k">output</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">MFProcessBatchDetail</span><span class="p">]</span> <span class="k">AS</span> <span class="p">[</span><span class="n">mpbd</span><span class="p">]</span> <span class="k">WHERE</span> <span class="p">[</span><span class="n">mpbd</span><span class="p">].[</span><span class="n">ProcessBatch_ID</span><span class="p">]</span> <span class="o">=</span> <span class="o">@</span><span class="n">processBatchID</span>

<span class="k">SELECT</span>  <span class="s1">&#39;Return Value&#39;</span> <span class="o">=</span> <span class="o">@</span><span class="n">return_value</span>
</pre></div>
</div>
<p>Process document collection type objects for the class</p>
<hr class="docutils" />
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXEC</span> <span class="n">dbo</span><span class="p">.</span><span class="n">spMFUpdateTable</span> <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="s1">&#39;MFOtherDocument&#39;</span><span class="p">,</span>
    <span class="o">@</span><span class="n">UpdateMethod</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="o">@</span><span class="n">IsDocumentCollection</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="o">@</span><span class="n">Debug</span> <span class="o">=</span> <span class="mi">101</span>
</pre></div>
</div>
<p>Update from and to M-Files with all optional parameters set to default.</p>
<hr class="docutils" />
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">--From M-Files to SQL</span>
<span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateTable</span><span class="p">]</span> <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="s1">&#39;MFCustomer&#39;</span><span class="p">,</span>
                             <span class="o">@</span><span class="n">UpdateMethod</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1">--or</span>
<span class="k">EXEC</span> <span class="n">spMFupdateTable</span> <span class="s1">&#39;MFCustomer&#39;</span><span class="p">,</span><span class="mi">1</span>

<span class="c1">--From SQL to M-Files</span>
<span class="k">EXEC</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">spMFUpdateTable</span><span class="p">]</span> <span class="o">@</span><span class="n">MFTableName</span> <span class="o">=</span> <span class="s1">&#39;MFCustomer&#39;</span><span class="p">,</span>
                             <span class="o">@</span><span class="n">UpdateMethod</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1">--or</span>
<span class="k">EXEC</span> <span class="n">spMFupdateTable</span> <span class="s1">&#39;MFCustomer&#39;</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>Update from and to M-Files with all optional parameters set to default.</p>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Date</p></td>
<td><p>Author</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>2022-06-21</p></td>
<td><p>LC</p></td>
<td><p>Modify proc to include document collections</p></td>
</tr>
<tr class="row-odd"><td><p>2021-04-14</p></td>
<td><p>LC</p></td>
<td><p>fix timestamp datatype bug</p></td>
</tr>
<tr class="row-even"><td><p>2021-03-15</p></td>
<td><p>LC</p></td>
<td><p>fix changing of class in the same object type in MF</p></td>
</tr>
<tr class="row-odd"><td><p>2021-03-11</p></td>
<td><p>LC</p></td>
<td><p>update maximum valid number range to between -1,79E27 and 1,79E27</p></td>
</tr>
<tr class="row-even"><td><p>2021-01-31</p></td>
<td><p>LC</p></td>
<td><p>Fix bug on insert new into audithistory</p></td>
</tr>
<tr class="row-odd"><td><p>2020-11-28</p></td>
<td><p>LC</p></td>
<td><p>Improve collection of property ids</p></td>
</tr>
<tr class="row-even"><td><p>2020-11-28</p></td>
<td><p>LC</p></td>
<td><p>Resolve issue when fail message</p></td>
</tr>
<tr class="row-odd"><td><p>2020-11-24</p></td>
<td><p>LC</p></td>
<td><p>New functionality to deal with changing of classes</p></td>
</tr>
<tr class="row-even"><td><p>2020-10-20</p></td>
<td><p>LC</p></td>
<td><p>Fix locationlisation for class_id</p></td>
</tr>
<tr class="row-odd"><td><p>2020-09-21</p></td>
<td><p>LC</p></td>
<td><p>Change column name Value to avoid conflict with property</p></td>
</tr>
<tr class="row-even"><td><p>2020-08-25</p></td>
<td><p>LC</p></td>
<td><p>Fix debugging and log messaging</p></td>
</tr>
<tr class="row-odd"><td><p>2020-08-27</p></td>
<td><p>LC</p></td>
<td><p>Rework logic to deal with deleted objects</p></td>
</tr>
<tr class="row-even"><td><p>2020-08-29</p></td>
<td><p>LC</p></td>
<td><p>Update treatment of required workflow errors</p></td>
</tr>
<tr class="row-odd"><td><p>2020-08-22</p></td>
<td><p>LC</p></td>
<td><p>Replace boolean column Deleted with property 27</p></td>
</tr>
<tr class="row-even"><td><p>2020-07-27</p></td>
<td><p>LC</p></td>
<td><p>Add handling of delete and check out status</p></td>
</tr>
<tr class="row-odd"><td><p>2020-06-13</p></td>
<td><p>LC</p></td>
<td><p>Remove xml_document when transaction failed</p></td>
</tr>
<tr class="row-even"><td><p>2020-05-12</p></td>
<td><p>LC</p></td>
<td><p>Set last modified user to MFSQL</p></td>
</tr>
<tr class="row-odd"><td><p>2020-04-20</p></td>
<td><p>LC</p></td>
<td><p>exclude last modified and and MF user to be modified</p></td>
</tr>
<tr class="row-even"><td><p>2020-03-09</p></td>
<td><p>LC</p></td>
<td><p>Resolve issue with timestamp format for finish formatting</p></td>
</tr>
<tr class="row-odd"><td><p>2020-02-27</p></td>
<td><p>LC</p></td>
<td><p>Resolve issue with open XML_Docs</p></td>
</tr>
<tr class="row-even"><td><p>2020-01-06</p></td>
<td><p>LC</p></td>
<td><p>Resolve issue: variable is null: &#64;RetainDeletions</p></td>
</tr>
<tr class="row-odd"><td><p>2020-01-06</p></td>
<td><p>LC</p></td>
<td><p>Resolving performance bug when filtering on objids</p></td>
</tr>
<tr class="row-even"><td><p>2019-12-31</p></td>
<td><p>DEV2</p></td>
<td><p>New output parameter add in spMFCreateObjectInternal to return the checkout objects.</p></td>
</tr>
<tr class="row-odd"><td><p>2019-10-01</p></td>
<td><p>LC</p></td>
<td><p>Allow for rounding where float has long decimals</p></td>
</tr>
<tr class="row-even"><td><p>2019-09-02</p></td>
<td><p>LC</p></td>
<td><p>Fix conflict where class table has property with ‘Name’ as the name V53</p></td>
</tr>
<tr class="row-odd"><td><p>2019-08-24</p></td>
<td><p>LC</p></td>
<td><p>Fix label of audithistory table inserts</p></td>
</tr>
<tr class="row-even"><td><p>2019-07-26</p></td>
<td><p>LC</p></td>
<td><p>Update removing of redundant items form AuditHistory</p></td>
</tr>
<tr class="row-odd"><td><p>2019-07-13</p></td>
<td><p>LC</p></td>
<td><p>Add working that not all records have been updated</p></td>
</tr>
<tr class="row-even"><td><p>2019-06-17</p></td>
<td><p>LC</p></td>
<td><p>UPdate MFaudithistory with changes</p></td>
</tr>
<tr class="row-odd"><td><p>2019-05-19</p></td>
<td><p>LC</p></td>
<td><p>Terminate early if connection cannot be established</p></td>
</tr>
<tr class="row-even"><td><p>2019-01-13</p></td>
<td><p>LC</p></td>
<td><p>Fix bug for uniqueidentifyer type columns (e.g. guid)</p></td>
</tr>
<tr class="row-odd"><td><p>2019-01-03</p></td>
<td><p>LC</p></td>
<td><p>Fix bug for updating time property</p></td>
</tr>
<tr class="row-even"><td><p>2018-12-18</p></td>
<td><p>LC</p></td>
<td><p>Validate that all records have been updated, raise error if not</p></td>
</tr>
<tr class="row-odd"><td><p>2018-12-06</p></td>
<td><p>LC</p></td>
<td><p>Fix bug t.objid not found</p></td>
</tr>
<tr class="row-even"><td><p>2018-11-05</p></td>
<td><p>LC</p></td>
<td><p>Include new parapameter to validate class and property structure</p></td>
</tr>
<tr class="row-odd"><td><p>2018-10-30</p></td>
<td><p>LC</p></td>
<td><p>Removing cursor method for update method 0 and reducing update time by 100%</p></td>
</tr>
<tr class="row-even"><td><p>2018-10-24</p></td>
<td><p>LC</p></td>
<td><p>Resolve bug when objids filter is used with only one object</p></td>
</tr>
<tr class="row-odd"><td><p>2018-10-20</p></td>
<td><p>LC</p></td>
<td><p>Set Deleted to != 1 instead of = 0 to ensure new records where deleted is not set is taken INSERT</p></td>
</tr>
<tr class="row-even"><td><p>2018-08-23</p></td>
<td><p>LC</p></td>
<td><p>Fix bug with presedence = 1</p></td>
</tr>
<tr class="row-odd"><td><p>2018-08-01</p></td>
<td><p>LC</p></td>
<td><p>Fix deletions of record bug</p></td>
</tr>
<tr class="row-even"><td><p>2018-08-01</p></td>
<td><p>LC</p></td>
<td><p>New parameter &#64;RetainDeletions to allow for auto removal of deletions Default = NO</p></td>
</tr>
<tr class="row-odd"><td><p>2018-06-26</p></td>
<td><p>LC</p></td>
<td><p>Improve reporting of return values</p></td>
</tr>
<tr class="row-even"><td><p>2018-05-16</p></td>
<td><p>LC</p></td>
<td><p>Fix conversion of float to nvarchar</p></td>
</tr>
<tr class="row-odd"><td><p>2018-04-04</p></td>
<td><p>DEV2</p></td>
<td><p>Added Licensing module validation code.</p></td>
</tr>
<tr class="row-even"><td><p>2017-11-03</p></td>
<td><p>DEV2</p></td>
<td><p>Added code to check required property has value or not</p></td>
</tr>
<tr class="row-odd"><td><p>2017-10-01</p></td>
<td><p>LC</p></td>
<td><p>Fix bug with length of fields</p></td>
</tr>
<tr class="row-even"><td><p>2017-08-23</p></td>
<td><p>DEV2</p></td>
<td><p>Add exclude null properties from update</p></td>
</tr>
<tr class="row-odd"><td><p>2017-08-22</p></td>
<td><p>DEV2</p></td>
<td><p>Add sync error correction</p></td>
</tr>
<tr class="row-even"><td><p>2017-07-06</p></td>
<td><p>LC</p></td>
<td><p>Add update of filecount column in class table</p></td>
</tr>
<tr class="row-odd"><td><p>2017-07-03</p></td>
<td><p>LC</p></td>
<td><p>Modify objids filter to include ids not in sql</p></td>
</tr>
<tr class="row-even"><td><p>2017-06-22</p></td>
<td><p>LC</p></td>
<td><p>Add ability to modify external_id</p></td>
</tr>
<tr class="row-odd"><td><p>2107-05-12</p></td>
<td><p>LC</p></td>
<td><p>Set processbatchdetail column detail</p></td>
</tr>
<tr class="row-even"><td><p>2016-10-10</p></td>
<td><p>LC</p></td>
<td><p>Change of name of settings table</p></td>
</tr>
<tr class="row-odd"><td><p>2016-09-21</p></td>
<td><p>LC</p></td>
<td><p>Removed &#64;UserName,&#64;Password,&#64;NetworkAddress and &#64;VaultName parameters and fectch it as comma separated list in &#64;VaultSettings parameter dbo.fnMFVaultSettings() function</p></td>
</tr>
<tr class="row-even"><td><p>2016-08-22</p></td>
<td><p>LC</p></td>
<td><p>Change objids to NVARCHAR(4000)</p></td>
</tr>
<tr class="row-odd"><td><p>2016-08-22</p></td>
<td><p>LC</p></td>
<td><p>Update settings index</p></td>
</tr>
<tr class="row-even"><td><p>2016-08-20</p></td>
<td><p>LC</p></td>
<td><p>Add Update_ID as output paramter</p></td>
</tr>
<tr class="row-odd"><td><p>2016-08-18</p></td>
<td><p>LC</p></td>
<td><p>Add defaults to parameters</p></td>
</tr>
<tr class="row-even"><td><p>2016-03-10</p></td>
<td><p>DEV2</p></td>
<td><p>New input variable added (&#64;ObjIDs)</p></td>
</tr>
<tr class="row-odd"><td><p>2016-03-10</p></td>
<td><p>DEV2</p></td>
<td><p>Input variable &#64;FromCreateDate  changed to &#64;MFModifiedDate</p></td>
</tr>
<tr class="row-even"><td><p>2016-02-22</p></td>
<td><p>LC</p></td>
<td><p>Improve debugging information; Remove is_template message when updatemethod = 1</p></td>
</tr>
<tr class="row-odd"><td><p>2015-07-18</p></td>
<td><p>DEV2</p></td>
<td><p>New parameter add in spMFCreateObjectInternal</p></td>
</tr>
<tr class="row-even"><td><p>2015-06-30</p></td>
<td><p>DEV2</p></td>
<td><p>New error Tracing and Return Value as LeRoux instruction</p></td>
</tr>
<tr class="row-odd"><td><p>2015-06-24</p></td>
<td><p>DEV2</p></td>
<td><p>Skip the object failed to update in M-Files</p></td>
</tr>
<tr class="row-even"><td><p>2015-04-23</p></td>
<td><p>DEV2</p></td>
<td><p>Removing Last modified &amp; Last modified by from Update data</p></td>
</tr>
<tr class="row-odd"><td><p>2015-04-16</p></td>
<td><p>DEV2</p></td>
<td><p>Adding update table details to MFUpdateHistory table</p></td>
</tr>
<tr class="row-even"><td><p>2015-04-08</p></td>
<td><p>DEV2</p></td>
<td><p>Deleting property value from M-Files (Task 57)</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spMFUpdateTableInternal.html" class="btn btn-neutral float-right" title="spMFUpdateTableInternal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spMFUpdateSynchronizeError.html" class="btn btn-neutral float-left" title="spMFUpdateSynchronizeError" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Laminin Solutions Ltd

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>